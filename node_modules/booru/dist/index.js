"use strict";var __importDefault=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(exports,"__esModule",{value:!0});const Constants_1=require("./Constants"),Booru_1=__importDefault(require("./boorus/Booru")),Derpibooru_1=__importDefault(require("./boorus/Derpibooru")),Site_1=__importDefault(require("./structures/Site")),XmlBooru_1=__importDefault(require("./boorus/XmlBooru")),util_1=require("util"),Utils_1=require("./Utils"),BooruTypes={derpi:Derpibooru_1.default,xml:XmlBooru_1.default},booruCache={};function booruFrom(o,r){return new(void 0!==o.type&&BooruTypes[o.type]?BooruTypes[o.type]:Booru_1.default)(o,r)}function booruForSite(o,r=null){const e=Utils_1.resolveSite(o);if(!e)throw new Constants_1.BooruError("Site not supported");return booruFrom(new Site_1.default(Constants_1.sites[e]),r)}function search(o,r=[],{limit:e=1,random:t=!1,page:s=0,credentials:u=null}={}){const i=Utils_1.resolveSite(o);if("string"==typeof e&&(e=parseInt(e,10)),null===i)throw new Constants_1.BooruError("Site not supported");if(!Array.isArray(r)&&"string"!=typeof r)throw new Constants_1.BooruError("`tags` should be an array or string");if("number"!=typeof e||Number.isNaN(e))throw new Constants_1.BooruError("`limit` should be an int");const n=new Site_1.default(Constants_1.sites[i]);return booruCache[i]||(booruCache[i]=booruFrom(n)),booruCache[i].search(r,{limit:e,random:t,page:s,credentials:u})}exports.forSite=booruForSite,exports.default=booruForSite,exports.search=search;const deprecatedCommonfy=util_1.deprecate(()=>{},"Common is now deprecated, just access the properties directly");function commonfy(o){return deprecatedCommonfy(),Promise.resolve(o)}exports.commonfy=commonfy;var Booru_2=require("./boorus/Booru");exports.BooruClass=Booru_2.Booru;var Constants_2=require("./Constants");exports.sites=Constants_2.sites;var Utils_2=require("./Utils");exports.resolveSite=Utils_2.resolveSite;var Constants_3=require("./Constants");exports.BooruError=Constants_3.BooruError;