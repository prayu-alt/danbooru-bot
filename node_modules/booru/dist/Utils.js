"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const Constants_1=require("./Constants"),fast_xml_parser_1=require("fast-xml-parser");function resolveSite(t){if("string"!=typeof t)return null;t=t.toLowerCase();for(const r in Constants_1.sites)if(r===t||Constants_1.sites[r].aliases.includes(t))return r;return null}async function jsonfy(t){if("object"==typeof t)return t;const r=fast_xml_parser_1.parse(t,{ignoreAttributes:!1,attributeNamePrefix:""});if(r.html){const t=[];throw r.html.body.h1&&t.push(r.html.body.h1),r.html.body.p&&t.push(r.html.body.p["#text"]),new Constants_1.BooruError(`The Booru sent back an error: '${t.join(": ")}'`,r.html)}return r.posts.post?r.posts.post:[]}function shuffle(t){let r,e,o=t.length;for(;0!==o;)e=Math.floor(Math.random()*o),r=t[o-=1],t[o]=t[e],t[e]=r;return t}function randInt(t,r){return t=Math.ceil(t),r=Math.floor(r),Math.floor(Math.random()*(r-t+1))+t}function validateSearchParams(t,r){const e=resolveSite(t);if("number"!=typeof r&&(r=parseInt(r,10)),null===e)throw new Constants_1.BooruError("Site not supported");if("number"!=typeof r||Number.isNaN(r))throw new Constants_1.BooruError("`limit` should be an int");return{site:e,limit:r}}function compareArrays(t,r){const e=[];return t.forEach(t=>{r.forEach(r=>{t.toLowerCase()===r.toLowerCase()&&e.push(t)})}),e}exports.resolveSite=resolveSite,exports.jsonfy=jsonfy,exports.shuffle=shuffle,exports.randInt=randInt,exports.validateSearchParams=validateSearchParams,exports.compareArrays=compareArrays;